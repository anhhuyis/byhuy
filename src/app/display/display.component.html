<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>Document</title>
</head>

<body>
  <app-home (changelang)="onLanguageChange($event)"></app-home>
  <div class="header">
    <h1>{{ 'Hiển thị danh sách' | translate }}</h1>
    <div class="search-container">
      <input type="text" [placeholder]="'Tìm kiếm...' | translate" name="search" #searchInput required />
      <button (click)="TimKiem(searchInput.value)">{{ 'Tìm' | translate }}</button>
    </div>
    </div>
  <div class="table-responsive">
    <table class="table table-bordered table-striped mt-4">
      <thead>
        <tr>
          <th>ID</th>
          <th>{{"Họ Tên"|translate}}</th>
          <th>{{"Ngày Sinh"|translate}}</th>
          <th>{{"CCCD"|translate}}</th>
          <th>{{"Giới Tính"|translate}}</th>
          <th>{{"Địa Chỉ"|translate}}</th>
          <th>Facebook/Web</th>
          <th>{{"Số Dư"|translate}} ({{"VND"|translate}})</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="searchResul.length === 0">
          <td colspan="8" class="text-center">
            Không có dữ liệu để hiển thị
          </td>
        </tr>
        <tr *ngFor="let person of searchResul">
          <td>{{ person.id }}</td>
          <td>{{ person.fullname }}</td>
          <td>{{ person.ngaySinh | date : "dd/MM/yyyy" }}</td>
          <td>{{ person.cccd}}</td>
          <td>{{ person.gioiTinh | translate }}</td>
          <td>{{ person.diaChi | translate }}</td>
          <td>
            <a [href]="person.fbWeb" target="_blank">{{ person.fbWeb }}</a>
          </td> 
          <td class="amount" *ngIf="lang=='vi'" [ngClass]="{'text-danger': person.balance < 0, 'text-success': person.balance >= 0} ">
            {{ person.balance < 0 ? '(' + (person.balance | number) + ')' : (person.balance | number) }}
          </td>
          <td class="amount" *ngIf="lang=='en'" [ngClass]="{'text-danger': person.balance < 0, 'text-success': person.balance >= 0} ">
            {{ person.balance < 0 ? '(' + (person.balance/usd | number) + ')' : (person.balance/usd | number) }}
          <td>
            <button class="btn btn-success btn-sm" (click)="PopupthuChi(person)">
              {{"Thu/Chi"|translate}}
            </button>
            <button class="btn btn-info btn-sm" (click)="PopupHistory(person)">
              {{"Lịch Sử"|translate}}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
</html>